(function (e, t) { function r(t, n, r, s, o) { if (!n.length || !r.length) { return } var u = e.extend({}, n.data("panel-options"), r.data("panel-options")), a = e.extend({}, u.ajax, o, { url: t, success: function (e, t, n) { if (typeof e === "string") { i(e, l) } if (u.ajax && u.ajax.success) { u.ajax.success.call(l[0], e, t, n) } if (o && o.success) { o.success.call(l[0], e, t, n) } } }), f = r.children(".panel-load-target:first"), l = f.length ? f : r; if (o && o.onStartLoad) { if (o.onStartLoad.call(l[0], u, a) === false) { return } } n[s ? "removeClass" : "addClass"]("show-panel-content"); l.trigger("content-panel-load"); e.ajax(a); r.data("content-panel-url", t); r.data("content-panel-options", o) } function i(e, t) { var n; if (!t.length) { return } n = t.closest(".panel-content").data("panel-back-button"); if (n) { t.children().not(n).remove() } else { t.empty() } t.append(e) } var n = e(t); n.on("click", ".open-on-panel-content, .open-on-panel-navigation", function (t) { var n = e(t.target).closest("a"), r = n.closest(".content-panel"), i; if (!n.length || !r.length) { return } i = n.attr("href"); if (e.trim(i).length === 0 || i == "#") { return } t.preventDefault(); r[e(this).hasClass("open-on-panel-content") ? "loadPanelContent" : "loadPanelNavigation"](i) }); e.fn.loadPanelNavigation = function (t, n) { return this.each(function (i) { var s = e(this).closest(".content-panel"), o = s.children(".panel-navigation"); r(t, s, o, true, n) }) }; e.fn.refreshPanelNavigation = function () { return this.each(function (t) { var n = e(this).closest(".content-panel"), i = n.children(".panel-navigation"), s = i.data("content-panel-url"); if (s) { r(s, n, i, true, i.data("content-panel-options")) } }) }; e.fn.loadPanelContent = function (t, n) { return this.each(function (i) { var s = e(this).closest(".content-panel"), o = s.children(".panel-content"); r(t, s, o, false, n) }) }; e.fn.refreshPanelContent = function () { return this.each(function (t) { var n = e(this).closest(".content-panel"), i = n.children(".panel-content"), s = i.data("content-panel-url"); if (s) { r(s, n, i, false, i.data("content-panel-options")) } }) }; e.fn.setPanelNavigation = function (t) { return this.each(function (n) { var r = e(this).closest(".content-panel"), s = r.children(".panel-navigation"); i(t, s) }) }; e.fn.setPanelContent = function (t) { return this.each(function (n) { var r = e(this).closest(".content-panel"), s = r.children(".panel-content"); i(t, s) }) }; e.fn.contentPanel = function () { return this.each(function (t) { var n = e(this).closest(".content-panel"), r = n.children(".panel-content"), i, s, o; if (n.hasClass("enabled-panels")) { return } if (n.length > 0 && r.length > 0) { n.addClass("enabled-panels"); i = r.children(".panel-load-target:first"); s = e('<div class="back"><span class="back-arrow"></span>Back</div>'); if (i.length) { s.insertBefore(i) } else { s.prependTo(r) } r.data("panel-back-button", s); s.click(function (e) { n.removeClass("show-panel-content") }); if (!n.hasClass("mobile-panels")) { o = function () { n[n.innerWidth() < 500 ? "addClass" : "removeClass"]("mobile-panels") }; o(); n.widthchange(o) } } }) }; e.template.addSetupFunction(function (e, t) { this.findIn(e, t, ".content-panel").contentPanel(); return this }) })(jQuery, document)