(function(e,t,n){var r=e(t),i=e(n);i.on("click",".accordion > dt",function(t){var n=e(this),r=n.parent();if(r.hasClass("same-height")){r.refreshAccordion()}if(r.hasClass("toggle-mode")){n.toggleClass("closed");if(n.hasClass("closed")){n.next("dd").stop(true).slideUp()}else{n.next("dd").stop(true).slideDown()}return}if(n.hasClass("closed")){r.children("dt").not(".closed").each(function(t){e(this).addClass("closed").next("dd").stop(true).slideUp()});n.removeClass("closed");n.next("dd").stop(true).slideDown()}});e.fn.refreshAccordion=function(){this.each(function(t){var n=e(this).closest(".accordion"),r=n.children("dd"),i,s=[],o=0;if(n.length===0||!n.hasClass("same-height")||r.length===0){return}i=n.tempShow();r.each(function(t){var n=e(this).show(),r,i;i=n.css("height","").outerHeight();r=Math.min(0,n.children(":first").parseCSSValue("margin-top"));o=Math.max(o,i+r);s[t]=[i,r]});r.each(function(t){var n=e(this),r=n.prev(),i=s[t][0],u=s[t][1];n.height(o-(i-n.height())-u);if(r&&r.hasClass("closed")){n.hide()}});i.tempShowRevert()});return this};e.template.addSetupFunction(function(t,n){var r=this.findIn(t,n,".accordion");r.filter(".same-height").refreshAccordion();r.each(function(t){var n=e(this).children("dt"),r;r=n.filter(".open");if(r.length===0){r=n.not(".closed").first()}if(r.length===0){r=n.first()}r.removeClass("closed").next("dd").show();r.siblings("dt").addClass("closed").next("dd").hide()});return this})})(jQuery,window,document)